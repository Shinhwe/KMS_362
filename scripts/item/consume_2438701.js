importPackage(java.lang);
importPackage(Packages.server);

var MaleItemList = [1000425, 1000421, 1000304, 1000310, 1000313, 1000317, 1000321, 1000561, 1000653, 1000657, 1000322, 1000329, 1000679, 1000684, 1000332, 1000336, 1000576, 1000646, 1000611, 1000347, 1000348, 1000355, 1000529, 1000568, 1000360, 1000505, 1000623, 1000668, 1000673, 1000427, 1000431, 1000435, 1000440, 1000442, 1000445, 1000517, 1000631, 1000448, 1000454, 1000461, 1000464, 1000555, 1000634, 1000471, 1000580, 1000581, 1000584, 1000660, 1000664, 1000666, 1000692, 1000696, 1000685, 1000689, 1000711, 1000715, 1000482, 1000503, 1000493, 1000500, 1000511, 1000518, 1000536, 1000563, 1000572, 1000585, 1000590, 1000596, 1000602, 1000610, 1000612, 1000616, 1000720, 1000699, 1000703, 1000627, 1000638, 1000644, 1000707, 1000726, 1000326, 1000481, 1000531, 1000540, 1000621, 1008003, 1008011, 1008015, 1008019, 1008023, 1008027, 1008031, 1008035, 1008039, 1008043, 1008047, 1008051, 1008055, 1008059, 1008063, 1008067, 1008071, 1008075, 1008079, 1008083, 1008087, 1008091, 1008095, 1008099, 1008103, 1008107, 1008111, 1008115, 1008119, 1008123, 1008127, 1008148, 1008152, 1008156, 1008160, 1008164, 1008168, 1008172, 1008143, 1008175, 1008179, 1008183, 1008187, 1008210, 1008214, 1008218, 1008222, 1008226, 1008230, 1008234, 1008238, 1008242, 1008246, 1008250, 1008254, 1008168, 1008172, 1008259, 1008263, 1008267, 1008271, 1008275, 1050850, 1050851, 1050915, 1052722, 1050859, 1050801, 1050992, 1050821, 1058036, 1058040, 1050828, 1050934, 1050938, 1050841, 1050998, 1050864, 1050928, 1050929, 1050933, 1050845, 1050853, 1058042, 1058045, 1058048, 1058023, 1058026, 1058051, 1058056, 1050942, 1050874, 1050878, 1050880, 1050961, 1050962, 1050885, 1058009, 1058011, 1050891, 1058031, 1050893, 1050910, 1050903, 1050921, 1050916, 1050947, 1050951, 1050952, 1050958, 1050968, 1050972, 1050975, 1050982, 1050986, 1058001, 1058002, 1058014, 1058018, 1058062, 1058066, 1058070, 1058074, 1050829, 1050873, 1050905, 1050926, 1058084, 1058095, 1058099, 1058103, 1058107, 1058111, 1058115, 1058119, 1058123, 1058127, 1058131, 1058135, 1058139, 1058143, 1058147, 1056197, 1058156, 1058160, 1058164, 1058174, 1058178, 1058182, 1058186, 1058190, 1058194, 1058207, 1058211, 1058215, 1058225, 1058229, 1058233, 1058237, 1058151, 1057002, 1057006, 1057010, 1057014, 1057018, 1057022, 1057026, 1057030, 1057034, 1057038, 1058240, 1045003, 1045007, 1045011, 1045015, 1704507, 1704501, 1704522, 1704542, 1704512, 1704516, 1704524, 1704528, 1704532, 1704539, 1704537, 1102116, 1102120, 1102124, 1102136, 1102129, 1102133, 1073303, 1073317, 1073318, 1075000, 1075001, 1075002, 1075003, 1012378, 1012900, 1012901, 1012902, 1012380, 1012381, 1012903, 1012904, 1012905, 1012906, 1012907, 1084003, 1084012, 1084016];

var FemaleItemList = [1001425, 1001421, 1001304, 1001310, 1001313, 1001317, 1001321, 1001561, 1001653, 1001657, 1001322, 1001329, 1001679, 1001684, 1001332, 1001336, 1001576, 1001646, 1001611, 1001347, 1001348, 1001355, 1001529, 1001568, 1001360, 1001505, 1001623, 1001668, 1001673, 1001427, 1001431, 1001435, 1001440, 1001442, 1001445, 1001517, 1001631, 1001448, 1001454, 1001461, 1001464, 1001555, 1001634, 1001471, 1001580, 1001581, 1001584, 1001660, 1001664, 1001666, 1001692, 1001696, 1001685, 1001689, 1001711, 1001715, 1001482, 1001503, 1001493, 1001500, 1001511, 1001518, 1001536, 1001563, 1001572, 1001585, 1001590, 1001596, 1001602, 1001610, 1001612, 1001616, 1001720, 1001699, 1001703, 1001627, 1001638, 1001644, 1001707, 1001726, 1001326, 1001481, 1001531, 1001540, 1001621, 1008003, 1008011, 1008015, 1008019, 1008023, 1008027, 1008031, 1008035, 1008039, 1008043, 1008047, 1008051, 1008055, 1008059, 1008063, 1008067, 1008071, 1008075, 1008079, 1008083, 1008087, 1008091, 1008095, 1008099, 1008103, 1008107, 1008111, 1008115, 1008119, 1008123, 1008127, 1008148, 1008152, 1008156, 1008160, 1008164, 1008168, 1008172, 1008143, 1008175, 1008179, 1008183, 1008187, 1008210, 1008214, 1008218, 1008222, 1008226, 1008230, 1008234, 1008238, 1008242, 1008246, 1008250, 1008254, 1008168, 1008172, 1008259, 1008263, 1008267, 1008271, 1008275, 1051855, 1051857, 1051847, 1051848, 1051937, 1051870, 1052730, 1051800, 1051801, 1056026, 1051821, 1056113, 1056117, 1051860, 1051809, 1051901, 1051962, 1051815, 1056070, 1056073, 1051820, 1051898, 1056088, 1051822, 1051823, 1051964, 1051968, 1051830, 1056032, 1051841, 1051865, 1056106, 1056107, 1056102, 1051868, 1051861, 1051990, 1051877, 1056076, 1056083, 1056057, 1051879, 1051883, 1051886, 1051888, 1051893, 1051994, 1051997, 1051913, 1056042, 1056047, 1056063, 1056064, 1051907, 1051929, 1051918, 1051921, 1051972, 1051973, 1051944, 1051949, 1051956, 1051983, 1051985, 1056001, 1056007, 1056009, 1056012, 1056018, 1056022, 1056033, 1056039, 1056048, 1056053, 1056094, 1056099, 1056120, 1051811, 1051840, 1051903, 1051925, 1056131, 1056142, 1056146, 1056150, 1056154, 1056158, 1056162, 1056166, 1056170, 1056174, 1056178, 1056182, 1056186, 1056190, 1056194, 1056198, 1056202, 1056209, 1056213, 1056217, 1056221, 1056225, 1056235, 1056239, 1056243, 1056247, 1056251, 1056255, 1056268, 1056272, 1056276, 1056280, 1056290, 1056294, 1056298, 1058151, 1057002, 1057006, 1057010, 1057014, 1057018, 1057022, 1057026, 1057030, 1057034, 1057038, 1056303, 1056307, 1045003, 1045007, 1045011, 1045015, 1704507, 1704501, 1704522, 1704542, 1704512, 1704516, 1704524, 1704528, 1704532, 1704539, 1704537, 1102116, 1102120, 1102124, 1102136, 1102129, 1102133, 1073303, 1073317, 1073318, 1075000, 1075001, 1075002, 1075003, 1012378, 1012900, 1012901, 1012902, 1012380, 1012381, 1012903, 1012904, 1012905, 1012906, 1012907, 1084003, 1084012, 1084016];

var enter = "\r\n";

var need = 2438701, item;

var selected, seld = -1;
var finallist;

function start() {
	status = -1;
	action(1, 0, 0);
}

function action(mode, type, sel) {
	if (mode == 1) {
		status++;
	} else {
		cm.dispose();
		return;
    	}
	if (status == 0) {
		var msg = "#e#rDEEZ 스페셜 캐시박스 D#n#k"+enter;
		msg += "#r#i"+need +"##z"+need +"##k를 가지고 있다면 제가 DEEZ 스페셜 캐시박스 D 에서 1종을 랜덤으로 바꿔줄게요. 운이 좋다면 #r어메이징하게 예쁜#k 스페셜 캐시 의상 아이템도 받을 수가 있죠! 어때요? 지금 바로 쿠폰을 사용하시겠어요?#b"+enter;
		msg += "#L1#아이템 리스트보기 (남)"+enter;
		msg += "#L2#아이템 리스트보기 (여)"+enter+enter;
		msg += "#L3#아이템 사용 (랜덤)";
		cm.sendSimple(msg);
	} else if (status == 1) {
		seld = sel;
		if (sel == 1 || sel == 2) {
			var msg = "DEEZ 스페셜 캐시박스 D에선 다음과 같은 아이템들이 등장합니다!#b"+enter;
			finallist = sel == 1 ? MaleItemList : FemaleItemList;
			for (i = 0; i < finallist.length; i++) {
				msg += "#i"+finallist[i]+"##z"+finallist[i]+"#";
				if (i % 5 == 4)
					msg += enter;
			}
			cm.sendOk(msg);
			cm.dispose();
		} else {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}
			var msg = "어떤 성별의 의상을 보시겠어요?#fs14##b"+enter;
			msg += "#L1#남성"+enter;
			msg += "#L2#여성"+enter;

			cm.sendSimple(msg);
		}
	} else if (status == 2) {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}
			finallist = sel == 1 ? MaleItemList : FemaleItemList;
			cm.sendYesNo("정말 #b#i"+need+"##z"+need+"##k 아이템을 사용하겠어요?");
	} else if (status == 3) {
			if (!cm.haveItem(need, 1)) {
				cm.sendOk("#b#i"+need+"##z"+need+"##k가 없는 것 같은데요?");
				cm.dispose();
				return;
			}

			item = finallist[Packages.server.Randomizer.rand(0, finallist.length)];

			check = Packages.server.MapleItemInformationProvider.getInstance().itemExists(item);

			while (!check) {
				item = finallist[Packages.server.Randomizer.rand(0, finallist.length)];
			}

			if (!cm.canHold(item)) {
				cm.sendOk("장비창에 공간이 부족합니다.");
				cm.dispose();
				return;
			}
			cm.gainItem(item, 1);
			cm.gainItem(need, -1);
			var msg = "어때요? #r#i"+item+"##z"+item+"##k아이템은 잘 받았어요? 정말 어메이징하지 않아요? 다음번에 또 #bDEEZ 스페셜 캐시박스 D#k가 생기면 나를 찾아와줘요!";
			cm.sendOk(msg);
			cm.dispose();
	}
}
